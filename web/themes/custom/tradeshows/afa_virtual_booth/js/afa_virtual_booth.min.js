let AFAVirtualBooth=function(){const ANIMATION_END="animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",CLASS_PRODUCT_TARGET="product-target",BUTTON_STATE_ENTER="enter",BUTTON_STATE_LEAVE="leave",BUTTON_STATE_OPEN="open",BUTTON_STATE_CLOSE="close";let _root_info={},_products_info={},_targets_info={};function constructor(){try{_root_info.isMobile=!1,_root_info.isIE=ieCheck(),_root_info.interactiveWidth=parseInt(_root_info.isIE?ieGetStyle("#main-content","width"):window.getComputedStyle(document.body).getPropertyValue("--interactive-width")),_root_info.interactiveHeight=parseInt(_root_info.isIE?ieGetStyle("#main-content","height"):window.getComputedStyle(document.body).getPropertyValue("--interactive-height")),$(window).resize(updateProjector),updateProjector();let json_xhr=new XMLHttpRequest;json_xhr.overrideMimeType("application/json"),json_xhr.open("GET","json/afa_virtual_booth.json"),json_xhr.onreadystatechange=function(){if(4==json_xhr.readyState&&"200"==json_xhr.status){let json_info=JSON.parse(json_xhr.responseText);$("#background-image").append($('<img src="img/'+json_info.background.image_ref+'">')),_products_info=json_info.products,products_setup()}},json_xhr.send(null)}catch(error){console.error("<<AFAVirtualBooth constructor>> ERROR: "+error)}}function products_setup(){for(product_index in _root_info.contentBody=$("#main-content"),_root_info.popupsContainer=$("#popups-container"),_root_info.mobileContainer=$("#mobile-container"),_root_info.buttonBlocker=$("#button-blocker"),_root_info.productTargetsContainer=$("#product-targets-container"),_targets_info.targets_array=[],_products_info){let currProduct=_products_info[product_index],currTargetBtn_info=currProduct.target_button;null!=currTargetBtn_info&&$.get("img/"+currTargetBtn_info.image_ref,(function(data){let currTarget_btn=$(data.documentElement),currTargetContainer=$("<div />");_root_info.productTargetsContainer.append(currTargetContainer);let currLabelContainer=$('<div class="product-target-label-container" />');currTarget_btn.data("labelContainer",currLabelContainer),currLabelContainer.css("left",currTargetBtn_info.loc_x),currLabelContainer.css("top",currTargetBtn_info.loc_y),currTargetContainer.append(currLabelContainer);let currLabelText=$("<span />");currTarget_btn.data("labelText",currLabelText),currLabelContainer.append(currLabelText);let currTargetBtn_index=_products_info.indexOf(currProduct);currTarget_btn.data("index",currTargetBtn_index),currTarget_btn.attr("class","product-target-content");let style_loc="left: "+currTargetBtn_info.loc_x+"; top: "+currTargetBtn_info.loc_y+";";currTarget_btn.attr("style",style_loc),currTargetContainer.append(currTarget_btn),currTarget_btn.find("g").each((function(g_index,currG){try{if(currGroup=$(currG),"hitspot_mc"==currGroup.attr("id")){currGroup.attr("class","product-target"),currGroup.attr("class","product-target-hover"),currGroup.on("mouseenter",onProductButtonStateChange("enter")),currGroup.on("click",onProductButtonStateChange("open")),currGroup.data("target",currTarget_btn),_targets_info.targets_array[currTargetBtn_index]=currTarget_btn,currLabelText.html(currProduct.title);let label_width=currLabelContainer.outerWidth();currLabelContainer.css("width",label_width-10+"px"),currLabelContainer.css("margin-left",-Math.abs(label_width/2-currTarget_btn.outerWidth()/2)+"px")}}catch(error){console.error("<<AFAVirtualBooth products_setup>> ERROR: "+error)}}))}));let currPopup=$('<div id="popup-'+product_index+'" class="popup"><div id="popup-title-'+product_index+'" class="popup-title">'+currProduct.title+'</div><div id="popup-divider-'+product_index+'" class="popup-divider"></div><div id="popup-button-menu-'+product_index+'" class="popup-button-menu"></div><div id="popup-contents-container-'+product_index+'" class="popup-content"></div><div id="popup-captions-container-'+product_index+'" class="popup-caption"></div><button id="popup-button-close-'+product_index+'" class="popup-button popup-button-close">CLOSE</button></div>');currPopup.find("#popup-button-close-"+product_index).on("click",onProductButtonStateChange("close"));let currMobile_btn=$('<div id="mobile-product-button-'+product_index+'" class="mobile-product-button"><div id="mobile-product-title-'+product_index+'" class="popup-title">'+currProduct.title+'</div><div id="mobile-product-divider-'+product_index+'" class="popup-divider"></div><div id="mobile-container-'+product_index+'" class="mobile-contents-container"><div id="mobile-contents-container-'+product_index+'" class="popup-content"></div><div id="mobile-captions-container-'+product_index+'" class="popup-caption"></div><div id="mobile-menu-buttons-'+product_index+'" class="popup-button-menu"></div><div class="mobile-button-close-container"><button id="mobile-button-close-'+product_index+'" class="popup-button popup-button-close">CLOSE</button></div></div></div>'),currMobileContainer=currMobile_btn.find("#mobile-container-"+product_index);currMobileContainer.data("index",product_index),currMobile_btn.data("container",currMobileContainer);let close_btn=currMobile_btn.find("#mobile-button-close-"+product_index);close_btn.data("mobileProduct_btn",currMobile_btn),currMobile_btn.data("close_btn",close_btn),close_btn.on("click",onProductButtonStateChange("close")),currMobile_btn.find("#mobile-product-title-"+product_index).on("click",onProductButtonStateChange("open"));let hasButtons=!1,button_width=0;for(button_index in currProduct.buttons&&(button_width=window.getComputedStyle(document.body).getPropertyValue("--button-width-"+currProduct.buttons.length)),""==button_width&&(button_width=ieGetStyle("#root-button-width-"+currProduct.buttons.length,"width")),currProduct.buttons)try{hasButtons=!0;let currButton_info=currProduct.buttons[button_index],currMenu_btn=$('<button id="popup-menu-button-'+button_index+'" class="popup-button'+(0==button_index?" popup-button-active":"")+'">'+currButton_info.label+"</button>");currMenu_btn.data("index",button_index),currMenu_btn.css("width",button_width),currPopup.find("#popup-button-menu-"+product_index).append(currMenu_btn);let currContent=$('<div id="popup-content-'+button_index+'" style="display: '+(0==button_index?"block":"none")+'"></div>'),currMobileMenu_btn=$('<button id="mobile-menu-button-'+button_index+'" class="popup-button'+(0==button_index?" popup-button-active":"")+'">'+currButton_info.label.replace(/<br>/gi," ")+"</button>");currMobileMenu_btn.data("index",button_index),currMobile_btn.find("#mobile-menu-buttons-"+product_index).append(currMobileMenu_btn);let currMobileContent=$('<div id="mobile-content-'+button_index+'" style="display: '+(0==button_index?"block":"none")+'"></div>');switch(currButton_info.type.toLowerCase()){case"text":currContent.html(currButton_info.content),currMenu_btn.on("click",onProductContentChange),currMobileContent.html(currButton_info.content),currMobileMenu_btn.on("click",onProductContentChange);break;case"link":currMenu_btn.on("click",(function(){window.open(currButton_info.content)})),currMobileMenu_btn.on("click",(function(){window.open(currButton_info.content)}));break;case"video":currContent.html('<iframe class="popup-video" src="'+currButton_info.content+'" frameborder="0"></iframe>'),currMenu_btn.on("click",onProductContentChange),currMobileContent.html('<iframe class="popup-video" src="'+currButton_info.content+'" frameborder="0"></iframe>'),currMobileMenu_btn.on("click",onProductContentChange)}currPopup.find("#popup-contents-container-"+product_index).append(currContent),currButton_info.caption&&(currPopup.find("#popup-captions-container-"+product_index).append($('<div id="popup-content-caption-'+button_index+'" style="display: '+(0==button_index?"block":"none")+'">'+currButton_info.caption+"</div>")),currMobile_btn.find("#mobile-captions-container-"+product_index).append($('<div id="mobile-content-caption-'+button_index+'" style="display: '+(0==button_index?"block":"none")+'">'+currButton_info.caption+"</div>"))),currMobile_btn.find("#mobile-contents-container-"+product_index).append(currMobileContent)}catch(error){console.error("<<AFAVirtualBooth products_setup>> ERROR: "+error)}currPopup.data("hasButtons",hasButtons),currPopup.data("url",currProduct.url),currPopup.data("index",product_index),currMobile_btn.data("hasButtons",hasButtons),currMobile_btn.data("url",currProduct.url),currMobile_btn.data("index",product_index),_root_info.popupsContainer.append(currPopup),_root_info.mobileContainer.append(currMobile_btn)}}function onProductButtonStateChange(stateType){return function(event){try{let currGroup=$(this);_root_info.isMobile&&(currGroup=-1==currGroup.attr("id").indexOf("mobile-button-close-")?currGroup.parent():currGroup.data("mobileProduct_btn"));let currTarget_btn="close"!=stateType?currGroup.data("target"):null,currPopup,currLabelContainer,currLabelText;switch(stateType){case"enter":currGroup.off("mouseenter"),currLabelContainer=currTarget_btn.data("labelContainer"),currLabelContainer.off(ANIMATION_END).removeClass("product-target-label-bkgd-off").addClass("product-target-label-bkgd-on"),currTarget_btn.data("labelText").removeClass("product-target-label-text-off").addClass("product-target-label-text-on"),currLabelContainer.one(ANIMATION_END,(function(event){currLabelContainer.off(ANIMATION_END)})),currGroup.on("mouseleave",onProductButtonStateChange("leave"));break;case"leave":currGroup.off("mouseleave"),currLabelContainer=currTarget_btn.data("labelContainer"),currLabelContainer.off(ANIMATION_END).removeClass("product-target-label-bkgd-on").addClass("product-target-label-bkgd-off"),currLabelText=currTarget_btn.data("labelText"),currLabelText.removeClass("product-target-label-text-on").addClass("product-target-label-text-off"),currLabelContainer.one(ANIMATION_END,(function(event){currLabelContainer.off(ANIMATION_END).removeClass("product-target-label-bkgd-off").removeClass("product-target-label-bkgd-on"),currLabelText.removeClass("product-target-label-text-on").removeClass("product-target-label-text-off")})),currGroup.on("mouseenter",onProductButtonStateChange("enter"));break;case"open":if(_root_info.isMobile){let prevGroup=_root_info.mobileContainer.data("prevGroup");try{null!=prevGroup&&prevGroup.attr("id")!=currGroup.attr("id")&&prevGroup.data("close_btn").trigger("click")}catch(error){}"none"==currGroup.data("container").css("display")?(popupReset(currGroup),currGroup.data("hasButtons")&&(_root_info.mobileContainer.data("prevGroup",currGroup),currGroup.attr("class","mobile-product-button-active"),currGroup.data("container").css("display","block"),currGroup.find("#mobile-menu-button-0").trigger("click"))):currGroup.data("close_btn").trigger("click"),currGroup&&(currGroup.data("url")&&window.open(currGroup.data("url")));try{currGroup[0].scrollIntoView({behavior:"smooth",block:"start",inline:"start"})}catch(error){}}else currPopup=_root_info.popupsContainer.find("#popup-"+currTarget_btn.data("index")),currPopup.data("hasButtons")&&(currPopup.css("display","block"),_root_info.buttonBlocker.css("display","block"),currPopup.css("opacity",0),currPopup.stop(),currPopup.data("isFadingIn",!0),currPopup.fadeTo("slow",1)),currPopup&&(currPopup.data("url")&&window.open(currPopup.data("url")));break;case"close":_root_info.isMobile?(_root_info.mobileContainer.data("prevGroup",null),popupReset(currGroup),currGroup.data("container").css("display","none"),currGroup.attr("class","mobile-product-button")):(currPopup=_root_info.popupsContainer.find("#popup-"+currGroup.parent().data("index")),currPopup.stop(),currPopup.data("isFadingIn",!0),currPopup.fadeTo("slow",0,(function(){currPopup.css("display","none")})),_root_info.buttonBlocker.css("display","none"),popupReset(currPopup),currPopup.find("#popup-menu-button-0").attr("class","popup-button popup-button-active"),currPopup.find("#popup-content-0").css("display","block"))}}catch(error){console.error("<<AFAVirtualBooth onProductButtonStateChange>> ERROR: "+error)}}}function onProductContentChange(event){try{let currMenu_btn=$(this),curr_index=currMenu_btn.data("index"),currPopup=currMenu_btn.parent().parent(),contentType="popup";_root_info.isMobile&&(contentType="mobile",currPopup.find("#mobile-contents-container-"+currPopup.parent().data("index")).children().each((function(content_index,currContent){"block"==(currContent=$(currContent)).css("display")&&currContent.css("display","none")}))),popupReset(currPopup),currPopup.find("#"+contentType+"-menu-button-"+curr_index).attr("class","popup-button popup-button-active"),currPopup.find("#"+contentType+"-content-"+curr_index).css("display","block"),currPopup.find("#"+contentType+"-content-caption-"+curr_index).css("display","block")}catch(error){console.error("<<AFAVirtualBooth onProductContentChange>> ERROR: "+error)}}function popupReset(currPopup){try{let contentType=_root_info.isMobile?"mobile":"popup";currPopup.find("button").each((function(button_index,curr_btn){"popup-button popup-button-active"==(curr_btn=$(curr_btn)).attr("class")&&curr_btn.attr("class","popup-button")}));let curr_index=currPopup.data("index");currPopup.find("#"+contentType+"-contents-container-"+curr_index).children().each((function(div_index,currDiv){"block"==(currDiv=$(currDiv)).css("display")&&currDiv.css("display","none"),currDiv.find(".popup-video").each((function(video_index,currVideo){let currSrc=$(currVideo).attr("src");$(currVideo).attr("src",currSrc)}))})),currPopup.find("#"+contentType+"-captions-container-"+curr_index).children().each((function(caption_index,currCaption){"block"==(currCaption=$(currCaption)).css("display")&&currCaption.css("display","none")}))}catch(error){console.error("<<AFAVirtualBooth popupReset>> ERROR: "+error)}}function updateProjector(){try{let currScale=Math.min(window.innerWidth/_root_info.interactiveWidth,window.innerHeight/_root_info.interactiveHeight);$("#main-content").css({transform:"translate("+-50*currScale+"%, "+-50*currScale+"%) scale("+currScale+")"}),_root_info.isMobile="true"===window.getComputedStyle(document.body).getPropertyValue("--is-mobile").trim().toLowerCase()}catch(error){console.error("<<AFAVirtualBooth updateProjector>> ERROR: "+error)}}function ieCheck(asVersion){null==asVersion&&(asVersion=!1);let return_version=-1;if("Microsoft Internet Explorer"==navigator.appName){let userAgent=navigator.userAgent,msie_re;null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(userAgent)&&(return_version=parseFloat(RegExp.$1))}else"Netscape"==navigator.appName&&(return_version=-1===navigator.appVersion.indexOf("Trident")?12:11);return asVersion?return_version:return_version<=11}function ieGetStyle(className,propertyName){let propertyValue="";try{let classes_info=document.styleSheets[0].rules||document.styleSheets[0].cssRules;for(let class_index in classes_info){let currClass_info=classes_info[class_index];if(currClass_info.selectorText==className){propertyValue+=currClass_info.cssText||currClass_info.style.cssText;try{null!=propertyName&&(propertyValue=currClass_info.style.getPropertyValue(propertyName))}catch(error){}}}}catch(error){console.error("<<AFAVirtualBooth ieGetStyle>> ERROR: "+error)}return propertyValue}constructor()};const SECOND=1e3;let _afaVirtualBooth;document.onreadystatechange=function(event){switch(document.readyState){case"interactive":let currScale=Math.min(window.innerWidth/parseInt(window.getComputedStyle(document.body).getPropertyValue("--interactive-width")),window.innerHeight/parseInt(window.getComputedStyle(document.body).getPropertyValue("--interactive-height")));$("#main-content").css({transform:"translate("+-50*currScale+"%, "+-50*currScale+"%) scale("+currScale+")"})}},window.onload=function afaVirtualBooth_init(){let loadingScreen;_afaVirtualBooth=new AFAVirtualBooth,$("#loading-screen").fadeOut(3e3)};